{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///papillon.js","webpack:///webpack/bootstrap 84de28c204f9a3e4436f","webpack:///./papillon.js","webpack:///./src/State.js","webpack:///./src/Observer.js","webpack:///./src/PropertyObserver.js","webpack:///./src/PropertyProxy.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_srcState","_srcState2","_srcObserver","_srcObserver2","State","Observer","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","map","WeakMap","timestamp","request","isObject","state","get","set","cache","keys","reduce","lastCheck","now","lastChange","window","requestAnimationFrame","undefined","v1","v2","_this","changed","changelog","forEach","hasOwnProperty","type","oldValue","is","nestedState","isChanged","_State","_State2","_PropertyObserver","_PropertyObserver2","host","callback","_this2","revert","concat","list","observer","push","observe","check","cb","_request","_callbacks","add","Set","_this3","checkFn","cancelAnimationFrame","_defineProperty","_PropertyProxy","_PropertyProxy2","register","PropertyObserver","singleton","proxy","getters","newValue","setters","size","on","unobserve","off","PropertyProxy","getter","setter","desc","getOwnPropertyDescriptor","getPrototypeOf","newVal","getOwnDescriptor","ownProperty","getProtoDescriptor","notDefined","bind"],"mappings":"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","file":"papillon.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"papillon\"] = factory();\n\telse\n\t\troot[\"papillon\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"papillon\"] = factory();\n\telse\n\t\troot[\"papillon\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _srcState = __webpack_require__(1);\n\t\n\tvar _srcState2 = _interopRequireDefault(_srcState);\n\t\n\tvar _srcObserver = __webpack_require__(2);\n\t\n\tvar _srcObserver2 = _interopRequireDefault(_srcObserver);\n\t\n\texports.State = _srcState2['default'];\n\texports.Observer = _srcObserver2['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar map = new WeakMap();\n\tvar timestamp = 0;\n\tvar request = false;\n\t\n\tvar State = (function () {\n\t  _createClass(State, null, [{\n\t    key: 'now',\n\t    value: function now() {\n\t      if (!request) {\n\t        timestamp = timestamp + 1;\n\t        request = window.requestAnimationFrame(function () {\n\t          return request = undefined;\n\t        });\n\t      }\n\t      return timestamp;\n\t    }\n\t  }, {\n\t    key: 'isObject',\n\t    value: function isObject(target) {\n\t      return typeof target === 'object' && target !== null;\n\t    }\n\t  }, {\n\t    key: 'is',\n\t    value: function is(v1, v2) {\n\t      if (v1 === 0 && v2 === 0) {\n\t        return 1 / v1 === 1 / v2;\n\t      }\n\t      if (v1 !== v1) {\n\t        return v2 !== v2;\n\t      }\n\t      return v1 === v2;\n\t    }\n\t  }]);\n\t\n\t  function State(target) {\n\t    _classCallCheck(this, State);\n\t\n\t    if (!State.isObject(target)) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t    var state = map.get(target);\n\t    if (state) {\n\t      return state;\n\t    }\n\t    map.set(target, this);\n\t\n\t    this.cache = Object.keys(target).reduce(function (cache, key) {\n\t      var value = cache[key] = target[key];\n\t      if (State.isObject(value)) {\n\t        new State(value);\n\t      }\n\t      return cache;\n\t    }, {});\n\t\n\t    this.target = target;\n\t    this.lastCheck = State.now();\n\t    this.lastChange = 0;\n\t  }\n\t\n\t  _createClass(State, [{\n\t    key: 'isChanged',\n\t    value: function isChanged() {\n\t      var _this = this;\n\t\n\t      var timestamp = State.now();\n\t\n\t      if (timestamp > this.lastCheck) {\n\t        var changed = false;\n\t\n\t        this.lastCheck = timestamp;\n\t        this.changelog = {};\n\t\n\t        Object.keys(this.cache).forEach(function (key) {\n\t          if (!_this.target.hasOwnProperty(key)) {\n\t            var value = _this.cache[key];\n\t            _this.changelog[key] = { type: 'delete', oldValue: value };\n\t            changed = true;\n\t          }\n\t        });\n\t\n\t        this.cache = Object.keys(this.target).reduce(function (cache, key) {\n\t          var value = _this.target[key];\n\t\n\t          if (!_this.cache.hasOwnProperty(key)) {\n\t            _this.changelog[key] = { type: 'set' };\n\t            changed = true;\n\t          } else if (!State.is(value, _this.cache[key])) {\n\t            _this.changelog[key] = _this.changelog[key] || { type: 'set' };\n\t            _this.changelog[key].oldValue = _this.cache[key];\n\t            changed = true;\n\t          }\n\t\n\t          if (State.isObject(value)) {\n\t            var nestedState = new State(value);\n\t            if (nestedState.isChanged()) {\n\t              changed = true;\n\t              if (!_this.changelog[key]) {\n\t                _this.changelog[key] = { type: 'modify' };\n\t                _this.changelog[key].changelog = nestedState.changelog;\n\t              }\n\t            }\n\t          }\n\t\n\t          cache[key] = _this.target[key];\n\t          return cache;\n\t        }, {});\n\t\n\t        if (changed) {\n\t          this.lastChange = this.lastCheck;\n\t        } else {\n\t          this.changelog = undefined;\n\t        }\n\t      }\n\t\n\t      return this.lastChange === timestamp;\n\t    }\n\t  }]);\n\t\n\t  return State;\n\t})();\n\t\n\texports['default'] = State;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _State = __webpack_require__(1);\n\t\n\tvar _State2 = _interopRequireDefault(_State);\n\t\n\tvar _PropertyObserver = __webpack_require__(3);\n\t\n\tvar _PropertyObserver2 = _interopRequireDefault(_PropertyObserver);\n\t\n\tvar Observer = (function () {\n\t  _createClass(Observer, null, [{\n\t    key: 'requestAnimationFrame',\n\t    value: function requestAnimationFrame(cb) {\n\t      var _this = this;\n\t\n\t      if (!this._request) {\n\t        this._callbacks = new Set([cb]);\n\t        this._request = window.requestAnimationFrame(function () {\n\t          _this._callbacks.forEach(function (cb) {\n\t            return cb();\n\t          });\n\t          _this._request = _this._callbacks = undefined;\n\t        });\n\t      } else {\n\t        this._callbacks.add(cb);\n\t      }\n\t\n\t      return cb;\n\t    }\n\t  }, {\n\t    key: 'cancelAnimationFrame',\n\t    value: function cancelAnimationFrame(cb) {\n\t      if (this._callbacks) {\n\t        this._callbacks['delete'](cb);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  function Observer(host, keys, callback) {\n\t    var _this2 = this;\n\t\n\t    _classCallCheck(this, Observer);\n\t\n\t    if (!host || !keys || !callback) {\n\t      throw new TypeError('Invalid arguments');\n\t    }\n\t\n\t    this.callback = callback;\n\t    this.revert = [];\n\t\n\t    this.state = new _State2['default']([].concat(keys).reduce(function (list, key) {\n\t      var observer = new _PropertyObserver2['default'](host, key);\n\t      list[key] = host[key];\n\t\n\t      _this2.revert.push(observer.observe(function (value) {\n\t        if (!_State2['default'].is(list[key], value)) {\n\t          list[key] = value;\n\t          _this2.check();\n\t        } else if (_State2['default'].isObject(value)) {\n\t          _this2.check();\n\t        }\n\t      }));\n\t\n\t      return list;\n\t    }, {}));\n\t  }\n\t\n\t  _createClass(Observer, [{\n\t    key: 'check',\n\t    value: function check() {\n\t      var _this3 = this;\n\t\n\t      if (!this.checkFn) {\n\t        this.checkFn = Observer.requestAnimationFrame(function () {\n\t          if (_this3.state.isChanged()) {\n\t            _this3.callback(_this3.state.changelog);\n\t          }\n\t\n\t          _this3.checkFn = undefined;\n\t        });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      if (this.checkFn) {\n\t        Observer.cancelAnimationFrame(this.checkFn);\n\t      }\n\t\n\t      this.revert.forEach(function (cb) {\n\t        return cb();\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Observer;\n\t})();\n\t\n\texports['default'] = Observer;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _PropertyProxy = __webpack_require__(4);\n\t\n\tvar _PropertyProxy2 = _interopRequireDefault(_PropertyProxy);\n\t\n\tvar register = new WeakMap();\n\t\n\tvar PropertyObserver = (function () {\n\t  _createClass(PropertyObserver, null, [{\n\t    key: 'singleton',\n\t    value: function singleton(host, key, target) {\n\t      var instance = register.get(host);\n\t      if (instance) {\n\t        if (instance[key]) {\n\t          return instance[key];\n\t        } else {\n\t          instance[key] = target;\n\t        }\n\t      } else {\n\t        register.set(host, _defineProperty({}, key, target));\n\t      }\n\t\n\t      return target;\n\t    }\n\t  }]);\n\t\n\t  function PropertyObserver(host, key) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, PropertyObserver);\n\t\n\t    var singleton = PropertyObserver.singleton(host, key, this);\n\t    if (singleton !== this) {\n\t      return singleton;\n\t    }\n\t\n\t    this.proxy = new _PropertyProxy2['default'](host, key, function (value) {\n\t      return _this.getters.forEach(function (cb) {\n\t        return cb(value);\n\t      });\n\t    }, function (newValue) {\n\t      return _this.setters.forEach(function (cb) {\n\t        return cb(newValue);\n\t      });\n\t    });\n\t\n\t    this.getters = new Set();\n\t    this.setters = new Set();\n\t  }\n\t\n\t  _createClass(PropertyObserver, [{\n\t    key: 'observe',\n\t    value: function observe(get, set) {\n\t      var _this2 = this;\n\t\n\t      if (!this.getters.size) {\n\t        this.proxy.on();\n\t      }\n\t\n\t      this.getters.add(get);\n\t      this.setters.add(set || get);\n\t\n\t      return function () {\n\t        _this2.unobserve(get, set);\n\t      };\n\t    }\n\t  }, {\n\t    key: 'unobserve',\n\t    value: function unobserve(get, set) {\n\t      this.getters['delete'](get);\n\t      this.setters['delete'](set || get);\n\t\n\t      if (!this.getters.size && !this.setters.size) {\n\t        this.proxy.off();\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return PropertyObserver;\n\t})();\n\t\n\texports['default'] = PropertyObserver;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar PropertyProxy = (function () {\n\t  function PropertyProxy(host, key, get, set) {\n\t    _classCallCheck(this, PropertyProxy);\n\t\n\t    this.host = host;\n\t    this.key = key;\n\t    this.getter = get;\n\t    this.setter = set || get;\n\t  }\n\t\n\t  _createClass(PropertyProxy, [{\n\t    key: \"getOwnDescriptor\",\n\t    value: function getOwnDescriptor() {\n\t      var desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\t\n\t      if (desc) {\n\t        if (!desc.configurable) {\n\t          throw new TypeError(\"Cannot create proxy for not configurable property '\" + this.key + \"'\");\n\t        }\n\t        if (!desc.get && !desc.set && !desc.writable) {\n\t          throw new TypeError(\"Cannot create proxy for readonly property '\" + this.key + \"'\");\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"getProtoDescriptor\",\n\t    value: function getProtoDescriptor() {\n\t      var _this = this;\n\t\n\t      var desc = undefined,\n\t          host = Object.getPrototypeOf(this.host);\n\t\n\t      while (host) {\n\t        desc = Object.getOwnPropertyDescriptor(host, this.key);\n\t        if (desc) {\n\t          break;\n\t        } else {\n\t          host = Object.getPrototypeOf(host);\n\t        }\n\t      }\n\t\n\t      if (desc) {\n\t        if (!desc.get && !desc.set) {\n\t          desc.get = function () {\n\t            delete _this.host[_this.key];\n\t            var value = _this.host[_this.key];\n\t            _this.on();\n\t            return value;\n\t          };\n\t          desc.set = function (newVal) {\n\t            delete _this.host[_this.key];\n\t            _this.host[_this.key] = newVal;\n\t            _this.on();\n\t          };\n\t        }\n\t      }\n\t\n\t      return desc;\n\t    }\n\t  }, {\n\t    key: \"on\",\n\t    value: function on() {\n\t      var desc = this.getOwnDescriptor();\n\t\n\t      if (desc) {\n\t        this.ownProperty = true;\n\t      } else {\n\t        this.ownProperty = false;\n\t        desc = this.getProtoDescriptor();\n\t      }\n\t\n\t      if (!desc) {\n\t        this.ownProperty = true;\n\t        this.notDefined = true;\n\t        desc = {\n\t          enumerable: true,\n\t          writable: true,\n\t          configurable: true\n\t        };\n\t      }\n\t\n\t      this.desc = desc;\n\t      this.value = this.host[this.key];\n\t\n\t      Object.defineProperty(this.host, this.key, {\n\t        configurable: true,\n\t        enumerable: this.desc.enumerable,\n\t        get: this.get.bind(this),\n\t        set: this.set.bind(this)\n\t      });\n\t    }\n\t  }, {\n\t    key: \"off\",\n\t    value: function off() {\n\t      if (this.ownProperty) {\n\t        if (this.notDefined) {\n\t          delete this.host[this.key];\n\t        } else {\n\t          if (!this.desc.get && !this.desc.set) {\n\t            this.desc.value = this.value;\n\t          }\n\t          Object.defineProperty(this.host, this.key, this.desc);\n\t        }\n\t      } else {\n\t        delete this.host[this.key];\n\t      }\n\t    }\n\t  }, {\n\t    key: \"get\",\n\t    value: function get() {\n\t      if (this.desc.get) {\n\t        this.value = this.desc.get.call(this.host);\n\t      }\n\t      this.getter(this.value);\n\t      return this.value;\n\t    }\n\t  }, {\n\t    key: \"set\",\n\t    value: function set(newValue) {\n\t      this.notDefined = false;\n\t\n\t      if (this.desc.set) {\n\t        this.desc.set.call(this.host, newValue);\n\t      }\n\t\n\t      if (this.desc.writable || this.desc.get || this.desc.set) {\n\t        this.value = newValue;\n\t      }\n\t\n\t      this.setter(this.value);\n\t    }\n\t  }]);\n\t\n\t  return PropertyProxy;\n\t})();\n\t\n\texports[\"default\"] = PropertyProxy;\n\tmodule.exports = exports[\"default\"];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** papillon.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 84de28c204f9a3e4436f\n **/","import State from './src/State';\nimport Observer from './src/Observer';\n\nexport {\n  State,\n  Observer\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./papillon.js\n **/","const map = new WeakMap();\nlet timestamp = 0;\nlet request = false;\n\nexport default class State {\n\n  static now() {\n    if (!request) {\n      timestamp = timestamp + 1;\n      request = window.requestAnimationFrame(\n        ()=> request = undefined\n      );\n    }\n    return timestamp;\n  }\n\n  static isObject(target) {\n    return typeof(target) === 'object' && target !== null;\n  }\n\n  static is(v1, v2) {\n    if (v1 === 0 && v2 === 0) {\n      return 1 / v1 === 1 / v2;\n    }\n    if (v1 !== v1) {\n      return v2 !== v2;\n    }\n    return v1 === v2;\n  }\n\n  constructor(target) {\n    if (!State.isObject(target)) {\n      throw new TypeError('Invalid arguments');\n    }\n    let state = map.get(target);\n    if (state) { return state; }\n    map.set(target, this);\n\n    this.cache = Object.keys(target).reduce((cache, key)=> {\n      let value = cache[key] = target[key];\n      if (State.isObject(value)) {\n        new State(value);\n      }\n      return cache;\n    }, {});\n\n    this.target = target;\n    this.lastCheck = State.now();\n    this.lastChange = 0;\n  }\n\n  isChanged() {\n    let timestamp = State.now();\n\n    if (timestamp > this.lastCheck) {\n      let changed = false;\n\n      this.lastCheck = timestamp;\n      this.changelog = {};\n\n      Object.keys(this.cache).forEach((key)=> {\n        if (!this.target.hasOwnProperty(key)) {\n          let value = this.cache[key];\n          this.changelog[key] = { type: 'delete', oldValue: value };\n          changed = true;\n        }\n      });\n\n      this.cache = Object.keys(this.target).reduce((cache, key)=> {\n        let value = this.target[key];\n\n        if (!this.cache.hasOwnProperty(key)) {\n          this.changelog[key] = { type:'set' };\n          changed = true;\n        } else if (!State.is(value, this.cache[key])) {\n          this.changelog[key] = this.changelog[key] || { type: 'set'};\n          this.changelog[key].oldValue = this.cache[key];\n          changed = true;\n        }\n\n        if (State.isObject(value)) {\n          let nestedState = new State(value);\n          if (nestedState.isChanged()) {\n            changed = true;\n            if (!this.changelog[key]) {\n              this.changelog[key] = { type: 'modify' };\n              this.changelog[key].changelog = nestedState.changelog;\n            }\n          }\n        }\n\n        cache[key] = this.target[key];\n        return cache;\n      }, {});\n\n      if (changed) {\n        this.lastChange = this.lastCheck;\n      } else {\n        this.changelog = undefined;\n      }\n    }\n\n    return this.lastChange === timestamp;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/State.js\n **/","import State from './State';\nimport PropertyObserver from './PropertyObserver';\n\nclass Observer {\n  static requestAnimationFrame(cb) {\n    if (!this._request) {\n      this._callbacks = new Set([cb]);\n      this._request = window.requestAnimationFrame(()=> {\n        this._callbacks.forEach(cb => cb());\n        this._request = this._callbacks = undefined;\n      });\n    } else {\n      this._callbacks.add(cb);\n    }\n\n    return cb;\n  }\n\n  static cancelAnimationFrame(cb) {\n    if (this._callbacks) {\n      this._callbacks.delete(cb);\n    }\n  }\n\n  constructor(host, keys, callback) {\n    if (!host || !keys || !callback) {\n      throw new TypeError('Invalid arguments');\n    }\n\n    this.callback = callback;\n    this.revert = [];\n\n    this.state = new State(\n      [].concat(keys).reduce( (list, key) => {\n        let observer = new PropertyObserver(host, key);\n        list[key] = host[key];\n\n        this.revert.push(observer.observe((value)=> {\n          if (!State.is(list[key], value)) {\n            list[key] = value;\n            this.check();\n          } else if (State.isObject(value)) {\n            this.check();\n          }\n        }));\n\n        return list;\n      }, {})\n    );\n  }\n\n  check() {\n    if (!this.checkFn) {\n      this.checkFn = Observer.requestAnimationFrame(()=> {\n        if (this.state.isChanged()) {\n          this.callback(this.state.changelog);\n        }\n\n        this.checkFn = undefined;\n      });\n    }\n  }\n\n  destroy() {\n    if (this.checkFn) {\n      Observer.cancelAnimationFrame(this.checkFn);\n    }\n\n    this.revert.forEach(cb => cb());\n  }\n}\n\nexport default Observer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Observer.js\n **/","import PropertyProxy from './PropertyProxy';\n\nlet register = new WeakMap();\n\nclass PropertyObserver {\n  static singleton(host, key, target) {\n    let instance = register.get(host);\n    if (instance) {\n      if (instance[key]) {\n        return instance[key];\n      } else {\n        instance[key] = target;\n      }\n    } else {\n      register.set(host, { [key]: target });\n    }\n\n    return target;\n  }\n\n  constructor(host, key) {\n    let singleton = PropertyObserver.singleton(host, key, this);\n    if (singleton !== this) {\n      return singleton;\n    }\n\n    this.proxy = new PropertyProxy(host, key,\n      (value)=> this.getters.forEach(cb => cb(value)),\n      (newValue)=> this.setters.forEach(cb => cb(newValue))\n    );\n\n    this.getters = new Set();\n    this.setters = new Set();\n  }\n\n  observe(get, set) {\n    if (!this.getters.size) {\n      this.proxy.on();\n    }\n\n    this.getters.add(get);\n    this.setters.add(set || get);\n\n    return ()=> {\n      this.unobserve(get, set);\n    };\n  }\n\n  unobserve(get, set) {\n    this.getters.delete(get);\n    this.setters.delete(set || get);\n\n    if (!this.getters.size && !this.setters.size) {\n      this.proxy.off();\n    }\n  }\n}\n\nexport default PropertyObserver;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/PropertyObserver.js\n **/","class PropertyProxy {\n  constructor(host, key, get, set) {\n    this.host = host;\n    this.key = key;\n    this.getter = get;\n    this.setter = set || get;\n  }\n\n  getOwnDescriptor() {\n    let desc = Object.getOwnPropertyDescriptor(this.host, this.key);\n\n    if (desc) {\n      if (!desc.configurable) {\n        throw new TypeError(\n          `Cannot create proxy for not configurable property '${this.key}'`);\n      }\n      if (!desc.get && !desc.set && !desc.writable) {\n        throw new TypeError(\n          `Cannot create proxy for readonly property '${this.key}'`);\n      }\n    }\n\n    return desc;\n  }\n\n  getProtoDescriptor() {\n    let desc, host = Object.getPrototypeOf(this.host);\n\n    while(host) {\n      desc = Object.getOwnPropertyDescriptor(host, this.key);\n      if (desc) {\n        break;\n      } else {\n        host = Object.getPrototypeOf(host);\n      }\n    }\n\n    if (desc) {\n      if (!desc.get && !desc.set) {\n        desc.get = ()=> {\n          delete this.host[this.key];\n          let value = this.host[this.key];\n          this.on();\n          return value;\n        };\n        desc.set = (newVal)=> {\n          delete this.host[this.key];\n          this.host[this.key] = newVal;\n          this.on();\n        };\n      }\n    }\n\n    return desc;\n  }\n\n  on() {\n    let desc = this.getOwnDescriptor();\n\n    if (desc) {\n      this.ownProperty = true;\n    } else {\n      this.ownProperty = false;\n      desc = this.getProtoDescriptor();\n    }\n\n    if (!desc) {\n      this.ownProperty = true;\n      this.notDefined = true;\n      desc = {\n        enumerable: true,\n        writable: true,\n        configurable: true\n      };\n    }\n\n    this.desc = desc;\n    this.value = this.host[this.key];\n\n    Object.defineProperty(this.host, this.key, {\n      configurable: true,\n      enumerable: this.desc.enumerable,\n      get: this.get.bind(this),\n      set: this.set.bind(this)\n    });\n  }\n\n  off() {\n    if (this.ownProperty) {\n      if (this.notDefined) {\n        delete this.host[this.key];\n      } else {\n        if (!this.desc.get && !this.desc.set) {\n          this.desc.value = this.value;\n        }\n        Object.defineProperty(this.host, this.key, this.desc);\n      }\n    } else {\n      delete this.host[this.key];\n    }\n  }\n\n  get() {\n    if (this.desc.get) {\n      this.value = this.desc.get.call(this.host);\n    }\n    this.getter(this.value);\n    return this.value;\n  }\n\n  set(newValue) {\n    this.notDefined = false;\n\n    if (this.desc.set) {\n      this.desc.set.call(this.host, newValue);\n    }\n\n    if (this.desc.writable || this.desc.get || this.desc.set) {\n      this.value = newValue;\n    }\n\n    this.setter(this.value);\n  }\n}\n\nexport default PropertyProxy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/PropertyProxy.js\n **/"],"sourceRoot":""}